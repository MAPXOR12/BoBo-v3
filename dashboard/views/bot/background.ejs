<%- include ('../parts/head.ejs',{bot,user})%>
  <style>
  .container .column .columns img {
    
    justify-content:space-between;
    padding-bottom:10px;
  
    }
  
   .bgs{
    
      
      background:#717173;
    position: absolute;
    
      margin-left:69px;
     
      border-bottom-right-radius:15%;
      border-top-left-radius:15%;
      opacity:0.6;
  
    }

    .bgs strong{
    pointer-events:none;
  
      color: var(--white);
      left:60px;
      z-index:1;
  
      
    }
    
    @media only screen and (min-height:800px){
      .bgs{
     display:inline-flex;
        margin-left:-220px;
        
      }
  .container .column .columns img{
    padding-left:10px; 
    paddin-top:3px;
    paddin-right:10px;
    
      }
  
      
      
    }
    
  </style>
  <div class="container">
    <form method="POST">
    <div class="column">
      <div class="columns is-multiline is-desktop is-variable is-7 pt-5">
  
        <% market.forEach((item)=>{ %>
    
        
      
        <div class="bgs">
      <strong>$<%=item.price%></strong> 
        
        </div>
      
  
   <img id="imageid" onclick="clickOnAdd();" src="<%= item.assets.link%>"  style="width:230px; height:170px; border-radius:3%; z-index:99;" alt="<%=item.name%>" value="<%= item.id%>"/>
        
       
   <% } ) %>
     
     </div>
      </div>
          </form>
     </div>
        
        
        <script>
          
          
   //    document.getElementById('imageid').addEventListener('click',()=>{
         
        
    
  function clickOnAdd(){
    
  setTimeout(()=>{
      $.post('/bgs',{
           image: $('#imageid').val(),   
        
    }).done(function(data){
                
       alert('hi')         
      
                if(data.error){
                
      const Toast = Swal.mixin({
  toast: true,
  position: 'top-end',
  showConfirmButton: false,
  timer: 4000,
  timerProgressBar: true,
  didOpen: (toast) => {
    toast.addEventListener('mouseleave', Swal.stopTimer)
    toast.addEventListener('mouseleave', Swal.resumeTimer)
    }})
    
  
Toast.fire({
  icon: 'error',
  title: 'we have problem',
  text: data.message,
  footer: 'BoBo Dashboard',
  
})
        
    return;              
 
    
    
  
    }else{
     
  
      const Toast = Swal.mixin({
  toast: true,
  position: 'top-end',
  showConfirmButton: false,
  timer: 3000,
  timerProgressBar: true,
  didOpen: (toast) => {
    toast.addEventListener('mouseenter', Swal.stopTimer)
    toast.addEventListener('mouseleave', Swal.resumeTimer)
  }
})
 
  Toast.fire({
  icon: 'success',
  title: 'successful...',
  text:data.message,
  footer: 'BoBo Dashboard',
    
  })
    return;      
    
    }})},2000)
       
       }
        </script>
  
  
  
  <%- include ('../parts/foot')%>