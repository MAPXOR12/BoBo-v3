<%- include ("../parts/sidebarguild",{bot,user}) %>

   <div class="container">
<div class="container contact-form">
<div class="contact-image">
      <i></i>
  </div>
  
  <form method="POST">
  
      
     <div class="row">
          <div class="col-md-6">
            
    <br>
    <br>
    
  
  <div class="form-group">
  <label for="exampleDataList" class="form-label">LOGS CHANNEL <span style="color:rgba(175,22,22)">*</span></label>
<input class="form-control" list="datalistOptions" id="logchannel" placeholder="Type to search...">
<datalist id="datalistOptions">
<% guild.channels.cache.map((channel)=>{%>
  <% if(channel.type==="GUILD_CATEGORY") return;%>
 <% if(channel.type === "GUILD_VOICE") return; %>
  
  <option value="<%= channel.id %>"><%=channel.name%></option>
    <% })%>
</datalist>
    
    
              </div>
  <br>
    <div class="form-check form-switch">
  <input class="form-check-input" type="checkbox" role="switch" id="roleCreate" checked>
  <label class="form-check-label" for="flexSwitchCheckChecked">Checked switch checkbox input</label>
    </div>
  
  <br><br><br><br><br>
  <div class="form-group">
    <label for="roleCreate">ROLE CREATE <span style="color:rgba(175,22,22)">*</span></label>
  <select class="form-select rounded" id="roleCreate" aria-label="Default select example">
  <option selected>Open this select menu</option>
  <option value="on">ON</option>
 <option value="off">OFF</option>
    </select>
    </div>
     <br>
    <br>
    <br>
    
    <button type="submit" id="myButton" onclick="clickOnAdd()" name="btnSubmit" class="btn btn-primary"><i class="fad fa-save"></i>Apply</button>
    </div>
  </div>
  </form>
  

</div>
  </div>
<br><br>
  
  
      <script>
  
    function clickOnAdd() {
    
$("#myButton").attr("disabled", true);
    $("#myButton").html('<i class="p-2 fad fa-spinner fa-w-16 fa-pulse fa-lg"></i>');

    setTimeout(() => {
      var switchStatus = false;
      $("#roleCreate").on('change', function() {
if ($(this).is(':checked')) {
    switchStatus = $(this).is(':checked');
}
else {
   switchStatus = $(this).is(':checked');
}
console.log(switchStatus);})
        $.post('/dashboard/guild/<%=guild.id%>/logsystem',{
                logchannel:$('#logchannel').val(),
                logon:$('#logon').val(),
                channelCreate:$('#channelCreate').val(),
                channelDelete:$('#channelDelete').val(),
                roleCreate:switchStatus,
                roleDelete:$('#roleDelete').val(),
                roleUpdate:$('#roleUpdate').val(),
                
        
    }).done(function(data){
                
                
                
                
                if(data.error){
      const Toast = Swal.mixin({
  toast: true,
  position: 'top-end',
  showConfirmButton: false,
  timer: 4000,
  timerProgressBar: true,
  didOpen: (toast) => {
    toast.addEventListener('mouseleave', Swal.stopTimer)
    toast.addEventListener('mouseleave', Swal.resumeTimer)
    }})
    
Toast.fire({
  icon: 'error',
  title: 'we have problem',
  text: data.message,
  footer: `<%=guild.name%>` + '<br>' + 'BoBo Dashboard',
  
})
                  
  $("#myButton").html('<i class="fal fa-paper-plane"></i>&nbsp;Submit');
                    $("#myButton").attr("disabled", false);
                    return;    
      
    
    
    
    }else{
     
  
      const Toast = Swal.mixin({
  toast: true,
  position: 'top-end',
  showConfirmButton: false,
  timer: 3000,
  timerProgressBar: true,
  didOpen: (toast) => {
    toast.addEventListener('mouseenter', Swal.stopTimer)
    toast.addEventListener('mouseleave', Swal.resumeTimer)
  }
})

      
  Toast.fire({
  icon: 'success',
  title: 'successful...',
  text:data.message,
  footer:`<%=guild.name%>` + 'BoBo Dashboard',
    
  })
            $("#myButton").html('<i class="fal fa-paper-plane"></i>&nbsp;Submit');
                    $("#myButton").attr("disabled", false);
                    return;
    
    }
              });
    },2000)
    }
      
        
   </script>
<%- include("../parts/foot.ejs")%>